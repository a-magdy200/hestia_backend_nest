#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running comprehensive pre-commit checks..."

# Run lint-staged (handles staged files only)
echo "ğŸ“ Running lint-staged..."
pnpm lint-staged

# Type checking (excluding migrations and mocks)
echo "ğŸ”§ Running TypeScript type check..."
pnpm run type-check

# Unit tests for changed files only (excluding migrations and mocks)
echo "ğŸ§ª Running unit tests..."
pnpm run test:unit

# Security audit
echo "ğŸ”’ Running security audit..."
pnpm run security

# Build check
echo "ğŸ—ï¸ Running build check..."
pnpm run build

echo "âœ… All pre-commit checks passed!" 